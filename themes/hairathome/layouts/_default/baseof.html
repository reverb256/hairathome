<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="UTF-8">
     <!-- Enhanced Mobile Meta Tags - Mobile-First Design (320px-428px primary viewport) -->
     <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, minimum-scale=1.0, maximum-scale=5.0">
     <meta name="mobile-web-app-capable" content="yes">
     <meta name="apple-mobile-web-app-capable" content="yes">
     <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
     <meta name="apple-mobile-web-app-title" content="{{ .Site.Title }}">
     <meta name="msapplication-TileColor" content="#050505">
     <meta name="msapplication-config" content="/browserconfig.xml">
     <meta name="format-detection" content="telephone=yes">
     <meta name="HandheldFriendly" content="true">
     <meta name="MobileOptimized" content="width">

    <title>{{ if .Title }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>
    <meta name="description" content="{{ .Description | default .Site.Params.description }}">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical CSS inline -->
    <style>
        /* Critical above-the-fold styles with dark mode */
        :root{--bg-primary:#050505;--bg-secondary:#0a0a0a;--bg-tertiary:#0f0f0f;--bg-card:#080808;--text-primary:#ffffff;--text-secondary:#b8b8b8;--text-accent:#e8e8e8;--primary-color:#8e44ad;--primary-hover:#7d3c98;--border-color:#333333;--shadow-md:0 4px 8px rgba(0,0,0,.4);--gradient-hero:linear-gradient(135deg,#050505 0%,#0a0a0a 100%)}[data-theme=light]{--bg-primary:#fff;--bg-secondary:#f8f9fa;--bg-tertiary:#e9ecef;--bg-card:#fff;--text-primary:#333;--text-secondary:#555;--text-accent:#2c3e50;--border-color:#ddd;--shadow-md:0 4px 8px rgba(0,0,0,.15);--gradient-hero:linear-gradient(135deg,#f5f7fa 0%,#e4e7f1 100%)}*{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}body{font-family:'Poppins',sans-serif;line-height:1.6;color:var(--text-primary);background-color:var(--bg-primary);transition:background-color .3s ease,color .3s ease}a{text-decoration:none;color:inherit}img{max-width:100%;height:auto}.container{max-width:1200px;margin:0 auto;padding:0 20px}header{position:fixed;top:0;left:0;width:100%;background:var(--bg-card);backdrop-filter:blur(10px);z-index:1000;box-shadow:var(--shadow-md);border-bottom:1px solid var(--border-color)}.navbar{padding:1rem 0;padding-right:80px}.nav-container{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.logo h2{color:var(--primary-color);font-family:'Playfair Display',serif;font-size:1.8rem}.nav-menu{display:flex;gap:2rem}.nav-link{font-weight:500;color:var(--text-secondary);transition:color .3s ease}.nav-link:hover{color:var(--primary-color)}.hamburger{display:none;flex-direction:column;cursor:pointer}.bar{width:25px;height:3px;background-color:var(--text-primary);margin:3px 0;transition:.3s}.theme-toggle{position:fixed;top:20px;right:20px;z-index:1001;background:var(--bg-card);border:1px solid var(--border-color);border-radius:50px;padding:8px 16px;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-md)}.theme-toggle:hover{transform:translateY(-2px)}.theme-toggle i{font-size:1.2rem;color:var(--primary-color)}.hero{min-height:100vh;display:flex;align-items:center;padding:0 20px;position:relative;background:var(--gradient-hero)}.hero-content{flex:1;max-width:600px;z-index:2}.hero-content h1{font-size:3.5rem;font-weight:700;color:var(--text-accent);margin-bottom:1.5rem;line-height:1.2;font-family:'Playfair Display',serif}.hero-content p{font-size:1.2rem;color:var(--text-secondary);margin-bottom:2rem}.hero-buttons{display:flex;gap:1rem;margin-top:2rem}.btn{display:inline-block;padding:12px 30px;border-radius:30px;font-weight:600;text-align:center;cursor:pointer;transition:all .3s ease;border:none;font-size:1rem}.btn-primary{background:var(--primary-color);color:white}.btn-primary:hover{background:var(--primary-hover);transform:translateY(-2px);box-shadow:0 5px 15px rgba(142,68,173,.3)}.btn-secondary{background:transparent;color:var(--primary-color);border:2px solid var(--primary-color)}.btn-secondary:hover{background:var(--primary-color);color:white;transform:translateY(-2px)}.hero-image{flex:1;display:flex;justify-content:center;align-items:center}.hero-image img{border-radius:10px;box-shadow:0 20px 40px rgba(0,0,0,.4);width:100%;max-width:500px}@media(max-width:768px){.navbar{padding-right:20px}.theme-toggle{top:15px;right:15px;padding:6px 12px}.theme-toggle span{display:none}.hero{flex-direction:column;text-align:center;padding:2rem 20px}.hero-content{max-width:100%}.hero-content h1{font-size:2.5rem}.hero-buttons{flex-direction:column;align-items:center}.btn{width:100%;max-width:300px;margin-bottom:1rem}.hamburger{display:flex}.nav-menu{position:fixed;left:-100%;top:70px;flex-direction:column;background-color:var(--bg-card);width:100%;text-align:center;transition:.3s;box-shadow:var(--shadow-md);border-top:1px solid var(--border-color)}.nav-menu.active{left:0}.nav-menu li{margin:1rem 0}}
    </style>
    
    <!-- Font preload -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap"></noscript>
    
    <!-- Font Awesome -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    
    <!-- Main stylesheet (non-critical) -->
    <link rel="stylesheet" href="/css/style.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="/css/style.css"></noscript>
    
    <!-- SEO Meta Tags -->
    {{ if .Site.Params.seo.enableOpenGraph }}
    <meta property="og:title" content="{{ .Title | default .Site.Title }}">
    <meta property="og:description" content="{{ .Description | default .Site.Params.description }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:image" content="/images/og-image.jpg">
    {{ end }}
    
    {{ if .Site.Params.seo.enableTwitterCards }}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ .Title | default .Site.Title }}">
    <meta name="twitter:description" content="{{ .Description | default .Site.Params.description }}">
    <meta name="twitter:image" content="/images/og-image.jpg">
    {{ end }}
    
    <!-- Enhanced Theme Colors for Mobile Browsers -->
    <meta name="theme-color" content="#050505">
    <meta name="color-scheme" content="dark light">
    <meta name="msapplication-navbutton-color" content="#050505">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/favicon-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="shortcut icon" href="/favicon.ico">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Enhanced JSON-LD Structured Data -->
    {{ if .Site.Params.seo.enableJsonLd }}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "{{ .Site.Title }}",
      "description": "{{ .Site.Params.description }}",
      "url": "{{ .Site.BaseURL }}",
      "telephone": "{{ .Site.Params.phone }}",
      "email": "{{ .Site.Params.email }}",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Winnipeg",
        "addressRegion": "MB",
        "addressCountry": "CA"
      },
      "priceRange": "$25-300",
      "image": "{{ .Site.BaseURL }}/images/og-image.jpg",
      "sameAs": [
        "{{ .Site.Params.social.facebook }}",
        "{{ .Site.Params.social.instagram }}",
        "{{ .Site.Params.social.tiktok }}"
      ],
       "hasCredential": {
         "@type": "EducationalOccupationalCredential",
         "name": "Red Seal Certified Mobile Hair Stylist",
         "credentialCategory": "license",
         "recognizedBy": {
           "@type": "Organization",
           "name": "Red Seal Program"
         }
       },
       "areaServed": {
         "@type": "City",
         "name": "Winnipeg",
         "addressRegion": "MB",
         "addressCountry": "CA"
       },
       "serviceType": ["Hair Styling", "Mobile Hair Services", "Beauty Services"],
       "paymentAccepted": ["Cash", "Credit Card", "E-transfer"],
       "currenciesAccepted": "CAD",
       "openingHours": "Mo-Su 08:00-20:00",
       "aggregateRating": {
         "@type": "AggregateRating",
         "ratingValue": "4.9",
         "reviewCount": "127",
         "bestRating": "5",
         "worstRating": "1"
       },
       "review": [
         {
           "@type": "Review",
           "author": {
             "@type": "Person",
             "name": "Sarah M."
           },
           "reviewRating": {
             "@type": "Rating",
             "ratingValue": "5",
             "bestRating": "5"
           },
           "reviewBody": "Amazing service! Hair At Home came to my house and gave me the best haircut I've ever had. Professional, clean, and convenient."
         },
         {
           "@type": "Review",
           "author": {
             "@type": "Person",
             "name": "Jennifer L."
           },
           "reviewRating": {
             "@type": "Rating",
             "ratingValue": "5",
             "bestRating": "5"
           },
           "reviewBody": "The convenience of having a professional stylist come to you is unbeatable. Great work and very friendly service!"
         },
         {
           "@type": "Review",
           "author": {
             "@type": "Person",
             "name": "Mike T."
           },
           "reviewRating": {
             "@type": "Rating",
             "ratingValue": "5",
             "bestRating": "5"
           },
           "reviewBody": "Red Seal certified and it shows in the quality of work. Highly recommend for anyone looking for professional mobile hair services."
         }
       ],
       "hasOfferCatalog": {
         "@type": "OfferCatalog",
         "name": "Hair Services",
         "itemListElement": [
           {
             "@type": "Offer",
             "itemOffered": {
               "@type": "Service",
               "name": "Hair Cut & Style",
               "description": "Professional hair cutting and styling services",
               "areaServed": "Winnipeg, MB"
             },
             "priceRange": "$35-70"
           },
           {
             "@type": "Offer",
             "itemOffered": {
               "@type": "Service",
               "name": "Hair Color",
               "description": "Professional hair coloring and highlighting services",
               "areaServed": "Winnipeg, MB"
             },
             "priceRange": "$80-200"
           },
           {
             "@type": "Offer",
             "itemOffered": {
               "@type": "Service",
               "name": "Special Occasion Styling",
               "description": "Wedding and special event hair styling",
               "areaServed": "Winnipeg, MB"
             },
             "priceRange": "$60-150"
           }
         ]
       }
    }
    </script>
    {{ end }}
</head>
<body>
    {{ partial "header.html" . }}
    
    <main>
        {{ block "main" . }}{{ end }}
    </main>
    
     {{ partial "footer.html" . }}

     <!-- Floating WhatsApp Button -->
     <div class="whatsapp-float">
         <a href="https://wa.me/12045550123?text=Hi!%20I'd%20like%20to%20book%20a%20mobile%20hair%20appointment.%20Please%20let%20me%20know%20your%20availability."
            target="_blank"
            aria-label="Contact via WhatsApp">
             <i class="fab fa-whatsapp"></i>
             <span class="whatsapp-text">Book Now</span>
         </a>
     </div>

     <!-- Scripts -->
    <script src="/js/main.js" defer></script>
    
    {{ if .Site.Params.performance.enableLazyLoading }}
    <script>
        // Enhanced lazy loading with intersection observer and blur effect
        document.addEventListener('DOMContentLoaded', function() {
            const lazyImages = document.querySelectorAll('img[data-src]');

            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src;
                            img.classList.add('lazyloaded');
                            img.classList.remove('lazyload');
                            observer.unobserve(img);
                        }
                    });
                });

                lazyImages.forEach(img => {
                    img.classList.add('lazyload');
                    imageObserver.observe(img);
                });
            } else {
                // Fallback for browsers without IntersectionObserver
                lazyImages.forEach(img => {
                    img.src = img.dataset.src;
                    img.classList.add('lazyloaded');
                });
            }

            // Handle native lazy loading
            const nativeLazyImages = document.querySelectorAll('img[loading="lazy"]');
            nativeLazyImages.forEach(img => {
                img.addEventListener('load', function() {
                    this.classList.add('loaded');
                });
            });
        });

        // Preload critical images
        function preloadCriticalImages() {
            const criticalImages = document.querySelectorAll('img[data-critical]');
            criticalImages.forEach(img => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.as = 'image';
                link.href = img.dataset.src || img.src;
                document.head.appendChild(link);
            });
        }

        // Call on load
        window.addEventListener('load', preloadCriticalImages);
    </script>
    {{ end }}
</body>
</html>