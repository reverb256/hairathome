<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Test</title>
    <style>
        :root {
            --bg-primary: #050505;
            --bg-secondary: #0a0a0a;
            --text-primary: #ffffff;
            --text-secondary: #b8b8b8;
        }
        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #333333;
            --text-secondary: #555555;
        }
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-secondary);
            border: 1px solid #333;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Theme Toggle Test</h1>
    <p>This page tests the theme toggle functionality.</p>
    
    <div class="theme-toggle" id="theme-toggle">
        <i class="fas fa-moon" id="theme-icon"></i>
        <span id="theme-text">Dark</span>
    </div>

    <script>
        // Theme Management
        class ThemeManager {
            constructor() {
                this.storageKey = 'hairathome-theme';
                this.darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
                this.init();
            }
            
            init() {
                // Set dark mode as default if no preference is stored
                const savedTheme = localStorage.getItem(this.storageKey);
                if (!savedTheme) {
                    this.setTheme('dark');
                } else {
                    this.setTheme(savedTheme);
                }
                
                // Listen for system theme changes
                this.darkModeMediaQuery.addListener((e) => {
                    if (!localStorage.getItem(this.storageKey)) {
                        this.setTheme(e.matches ? 'dark' : 'light');
                    }
                });
                
                // Setup theme toggle
                this.setupThemeToggle();
            }
            
            setTheme(theme) {
                const html = document.documentElement;
                const themeIcon = document.getElementById('theme-icon');
                const themeText = document.getElementById('theme-text');
                
                if (theme === 'dark') {
                    html.removeAttribute('data-theme');
                    themeIcon.className = 'fas fa-moon';
                    if (themeText) themeText.textContent = 'Dark';
                } else {
                    html.setAttribute('data-theme', 'light');
                    themeIcon.className = 'fas fa-sun';
                    if (themeText) themeText.textContent = 'Light';
                }
                
                localStorage.setItem(this.storageKey, theme);
                
                // Update meta theme-color for mobile browsers
                this.updateMetaThemeColor(theme);
            }
            
            setupThemeToggle() {
                const toggle = document.getElementById('theme-toggle');
                if (toggle) {
                    toggle.addEventListener('click', () => {
                        const currentTheme = localStorage.getItem(this.storageKey) || 'dark';
                        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                        this.setTheme(newTheme);
                    });
                }
            }
            
            updateMetaThemeColor(theme) {
                let metaThemeColor = document.querySelector('meta[name="theme-color"]');
                if (!metaThemeColor) {
                    metaThemeColor = document.createElement('meta');
                    metaThemeColor.name = 'theme-color';
                    document.head.appendChild(metaThemeColor);
                }
                
                metaThemeColor.content = theme === 'dark' ? '#0a0a0a' : '#ffffff';
            }
            
            getCurrentTheme() {
                return localStorage.getItem(this.storageKey) || 'dark';
            }
        }

        // Initialize the website
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Theme test page loaded!');
            
            // Initialize theme manager
            window.themeManager = new ThemeManager();
        });
    </script>
</body>
</html>